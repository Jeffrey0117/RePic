# Repic 功能規劃

## 已完成功能

### 核心功能
- [x] 本地資料夾瀏覽
- [x] 網路相簿 (Web Album)
- [x] .repic 虛擬圖片檔
- [x] 單張裁切（破壞性/非破壞性）
- [x] 批量裁切（套用相同比例）
- [x] 多選批量刪除
- [x] 上傳雲端 (urusai.cc)
- [x] 複製到剪貼簿（含裁切）
- [x] 從網頁拖曳加入相簿
- [x] 匯出 .repic 捷徑檔
- [x] i18n 中/英文切換

### UI/UX
- [x] Sidebar 縮圖預覽
- [x] Sidebar 寬度可調整
- [x] 滾輪縮放（朝滑鼠位置）
- [x] 拖曳平移
- [x] 鍵盤左右切換圖片
- [x] Info 面板（metadata）
- [x] 載入中 spinner
- [x] 不支援來源友善提示

---

## 待開發功能

### 🔥 體驗優化 (High Priority)

#### 圖片預載
- 預載當前圖片前後 2-3 張
- 減少切換時的載入延遲
- 適用於本地和網路模式

#### 記住上次資料夾
- 開啟時自動載入上次開啟的資料夾
- 儲存在 localStorage 或 electron-store

#### 拖曳排序
- Album 內圖片可拖曳調整順序
- 即時更新 localStorage
- 視覺反饋：拖曳時顯示插入位置

#### 從剪貼簿貼圖
- Ctrl+V / Cmd+V 貼上圖片
- 支援圖片 blob 和 URL 文字
- Album 模式：加入相簿
- Local 模式：另存新檔

---

### ⚡ 效能優化 (Medium Priority)

#### 縮圖快取
- 本地生成縮圖並快取
- 避免每次重新縮放大圖
- 使用 IndexedDB 或檔案系統

#### 離線快取
- Web album 圖片離線可檢視
- 下載後儲存到本地快取
- 顯示離線可用狀態

#### 虛擬化列表
- Sidebar 大量圖片時使用虛擬滾動
- 只渲染可見區域的縮圖
- 使用 react-window 或類似方案

---

### 📦 批量操作 (High Priority)

#### 批量下載
- 多選後一次下載所有圖片
- 可選擇：
  - 下載到單一資料夾
  - 保留原檔名 / 重新編號
- 進度顯示

#### 批量上傳
- 多選後批量上傳到雲端
- 進度條顯示上傳狀態
- 完成後顯示所有 URL
- 可一鍵複製所有 URL

#### 批量轉虛擬檔案
- 將本地圖片轉為 .repic 虛擬檔案
- 流程：
  1. 上傳圖片到雲端
  2. 生成 .repic 檔案（包含雲端 URL）
  3. 選擇是否刪除本地原檔
- 選項：
  - [ ] 上傳後刪除本地原檔（釋放空間）
  - [ ] 保留本地原檔（雙重備份）
- 用途：節省本地空間，保留快速存取

#### 虛擬檔案批量實體化
- 將 .repic 虛擬檔案轉回本地實體檔案
- 流程：
  1. 下載雲端圖片
  2. 儲存為本地實體檔案
  3. 選擇是否刪除 .repic 檔案
- 選項：
  - [ ] 下載後刪除 .repic 檔案
  - [ ] 保留 .repic 檔案
- 用途：需要離線存取時

---

### 🔧 Album 管理

#### Album 匯入/匯出
- 匯出為 JSON 檔案備份
- 從 JSON 匯入還原
- 包含所有圖片 URL 和裁切資訊

---

### 🎨 UI 增強

#### Sidebar 位置切換
- 可選擇 sidebar 位置：
  - 左側（預設）
  - 底部（水平排列）
- 記住用戶偏好

---

## 優先順序建議

### Phase 1 - 核心體驗
1. 記住上次資料夾
2. 圖片預載
3. 從剪貼簿貼圖

### Phase 2 - 批量操作
1. 批量下載
2. 批量上傳
3. 批量轉虛擬檔案

### Phase 3 - 效能優化
1. 縮圖快取
2. 虛擬化列表
3. 離線快取

### Phase 4 - 進階功能
1. Album 匯入/匯出
2. Sidebar 位置切換
3. 虛擬檔案批量實體化
